{"ast":null,"code":"var _jsxFileName = \"/home/capslock/Downloads/envy/src/components/checkout.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport parseJwt from './../store/helpers/common';\nimport SimpleReactValidator from 'simple-react-validator';\nimport { getUserdetails } from \"./../store/actions/userActions\";\nimport { FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport toastr from \"reactjs-toastr\";\nimport axios from 'axios';\n\nclass checkout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validateLoginForm = e => {\n      let validate = this.loginValidator;\n\n      if (validate.allValid()) {} else {\n        validate.showMessages();\n        this.forceUpdate();\n      }\n\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n      e.preventDefault();\n    };\n\n    this.placeOrder = () => {\n      const _this$state = this.state,\n            currid = _this$state.currid,\n            currusercart = _this$state.currusercart,\n            curruser_vxp = _this$state.curruser_vxp,\n            username = _this$state.username,\n            name = _this$state.name,\n            email = _this$state.email,\n            phone = _this$state.phone,\n            address = _this$state.address,\n            pincode = _this$state.pincode,\n            ordernotes = _this$state.ordernotes;\n      var sum = 0;\n\n      for (var i = 0; i < currusercart.length; i++) {\n        sum += parseInt(currusercart[i].price);\n      }\n\n      const totalsum = sum;\n      const remainingbal = curruser_vxp - totalsum;\n      let request;\n      let formData = new FormData();\n      formData.append('currid', currid);\n      formData.append('remainingbal', remainingbal);\n      formData.append('price', totalsum);\n      formData.append('email', email);\n      formData.append('username', username);\n      formData.append('phone', phone);\n      formData.append('address', address);\n      formData.append('pincode', pincode);\n      formData.append('ordernotes', ordernotes);\n      formData.append('name', name);\n      formData.append('cartdata', JSON.stringify(currusercart));\n      request = {\n        method: 'POST',\n        url: `https://xrsports.gg/team/public/user/checkout-order`,\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Auth-Token': `${localStorage.getItem('token')}`\n        },\n        data: formData\n      };\n      axios(request).then(data => {\n        if (data.data.ResponseCode === \"1\") {\n          toastr.success(data.data.ResponseText, {\n            displayDuration: 1500\n          });\n        } else {\n          toastr.error(data, {\n            displayDuration: 1500\n          });\n        }\n      });\n    };\n\n    this.loginValidator = new SimpleReactValidator();\n    this.state = {\n      usersdata: '',\n      isLoggedIn: false,\n      currid: '',\n      currusercart: '',\n      curruser_vxp: '',\n      username: '',\n      name: '',\n      email: '',\n      phone: '',\n      address: '',\n      pincode: '',\n      ordernotes: ''\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('token')) {\n      const currdetails = parseJwt(localStorage.getItem('token'));\n      const currid = currdetails.sub;\n      this.setState({\n        currid: currid,\n        isLoggedIn: true\n      });\n      this.props.dispatch(getUserdetails(currid));\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      usersdata: nextProps.userdata,\n      username: nextProps.userdata.nickname,\n      currusercart: nextProps.userdata.cart,\n      curruser_vxp: nextProps.userdata.vxp\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          currusercart = _this$state2.currusercart,\n          isLoggedIn = _this$state2.isLoggedIn,\n          curruser_vxp = _this$state2.curruser_vxp;\n\n    if (currusercart === null || currusercart === '') {\n      return React.createElement(\"div\", {\n        id: \"mainpage\",\n        className: \"main_box col-md-12 p-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"https://res.cloudinary.com/dnv0dij0y/image/upload/v1575621923/New_Project_57_ipahtu.png\",\n        className: \"emptycart\",\n        name: \" empty cart\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"OOPS..!! Your cart is empty..\")));\n    } else {\n      if (currusercart.length) {\n        var sum = 0;\n\n        for (var i = 0; i < currusercart.length; i++) {\n          sum += parseInt(currusercart[i].price);\n        }\n\n        const totalsum = sum;\n        const remainingbal = curruser_vxp - totalsum;\n        return React.createElement(\"div\", {\n          id: \"mainpage\",\n          className: \"main_box col-md-12 p-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, isLoggedIn ? currusercart === null || currusercart === '' ? React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"https://res.cloudinary.com/dnv0dij0y/image/upload/v1575621923/New_Project_57_ipahtu.png\",\n          className: \"emptycart\",\n          name: \" empty cart\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, \"OOPS..!! Your cart is empty..\")) : React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          className: \"table ranking mt-2 leaderbrd leaderboard mt-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          className: \"new_list_tournament only_headings list_game leadehead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          className: \"border-top-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"Product Image\"), React.createElement(\"th\", {\n          className: \"border-top-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"Title\"), React.createElement(\"th\", {\n          className: \"border-top-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"Price\"), React.createElement(\"th\", {\n          className: \"border-top-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, \"Size\"), React.createElement(\"th\", {\n          className: \"border-top-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Quantity\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, currusercart.length ? currusercart.map(post => React.createElement(\"tr\", {\n          key: post.unique,\n          className: \"table-secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"rounded-circle cartproductimage\",\n          src: `https://xrsports.gg/team/public/rewards/${post.image}`,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, post.product_name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, post.price), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, post.size), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"1\"))) : 'Cart is empty'))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"leftside\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, curruser_vxp === totalsum || curruser_vxp > totalsum ? React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"cartcal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"floatleft-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \"Redeemable XP Balance:\"), \" \", React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, curruser_vxp)), React.createElement(\"div\", {\n          className: \"floatleft-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"Oder Total:\"), \" \", React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, totalsum)), React.createElement(\"div\", {\n          className: \"floatleft-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Remaining XP:\"), \" \", React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, curruser_vxp, \" XP - \", totalsum, \" XP = \", remainingbal, \" XP\"))), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Cart Total: \", totalsum, \" XP\"), \"  \") : ''), React.createElement(\"div\", {\n          className: \"checkoutform\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"Name:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"\",\n          value: this.state.name,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"Email:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"email\",\n          placeholder: \"\",\n          value: this.state.email,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, \"Phone:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"phone\",\n          placeholder: \"\",\n          value: this.state.phone,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, \"Delivery Address:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"address\",\n          placeholder: \"\",\n          value: this.state.address,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"Pincode:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"pincode\",\n          placeholder: \"\",\n          value: this.state.pincode,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(FormLabel, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, \"Order Notes:\"), React.createElement(FormControl, {\n          type: \"text\",\n          name: \"ordernotes\",\n          placeholder: \"\",\n          value: this.state.ordernotes,\n          onChange: e => this.validateLoginForm(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        })), React.createElement(\"input\", {\n          type: \"submit\",\n          name: \"placeorder\",\n          id: \"placeorderfinal\",\n          onClick: e => this.placeOrder(e),\n          value: \"Place Order\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        })))) : React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, \"please Login\")));\n      }\n    }\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  userdata: state.userDetails.data\n});\n\nexport default connect(mapStateToProps)(checkout);","map":{"version":3,"sources":["/home/capslock/Downloads/envy/src/components/checkout.jsx"],"names":["React","Component","connect","parseJwt","SimpleReactValidator","getUserdetails","FormGroup","FormControl","FormLabel","toastr","axios","checkout","constructor","props","validateLoginForm","e","validate","loginValidator","allValid","showMessages","forceUpdate","setState","target","name","value","preventDefault","placeOrder","state","currid","currusercart","curruser_vxp","username","email","phone","address","pincode","ordernotes","sum","i","length","parseInt","price","totalsum","remainingbal","request","formData","FormData","append","JSON","stringify","method","url","headers","localStorage","getItem","data","then","ResponseCode","success","ResponseText","displayDuration","error","usersdata","isLoggedIn","componentDidMount","currdetails","sub","dispatch","componentWillReceiveProps","nextProps","userdata","nickname","cart","vxp","render","map","post","unique","image","product_name","size","mapStateToProps","userDetails"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,SAASC,cAAT,QAA8B,gCAA9B;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,SAAjC,QAAkD,iBAAlD;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAN,SAAuBV,SAAvB,CAAiC;AAC7BW,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAmCnBC,iBAnCmB,GAmCEC,CAAD,IAAO;AACvB,UAAIC,QAAQ,GAAG,KAAKC,cAApB;;AACA,UAAID,QAAQ,CAACE,QAAT,EAAJ,EAAyB,CAExB,CAFD,MAEO;AACHF,QAAAA,QAAQ,CAACG,YAAT;AACA,aAAKC,WAAL;AACH;;AACD,WAAKC,QAAL,CAAc;AAAE,SAACN,CAAC,CAACO,MAAF,CAASC,IAAV,GAAiBR,CAAC,CAACO,MAAF,CAASE;AAA5B,OAAd;AACAT,MAAAA,CAAC,CAACU,cAAF;AACH,KA7CkB;;AAAA,SA8CnBC,UA9CmB,GA8CN,MAAK;AAAA,0BACqF,KAAKC,KAD1F;AAAA,YACPC,MADO,eACPA,MADO;AAAA,YACCC,YADD,eACCA,YADD;AAAA,YACcC,YADd,eACcA,YADd;AAAA,YAC4BC,QAD5B,eAC4BA,QAD5B;AAAA,YACsCR,IADtC,eACsCA,IADtC;AAAA,YAC2CS,KAD3C,eAC2CA,KAD3C;AAAA,YACiDC,KADjD,eACiDA,KADjD;AAAA,YACuDC,OADvD,eACuDA,OADvD;AAAA,YAC+DC,OAD/D,eAC+DA,OAD/D;AAAA,YACuEC,UADvE,eACuEA,UADvE;AAEd,UAAIC,GAAG,GAAG,CAAV;;AACQ,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAGT,YAAY,CAACU,MAA9B,EAAsCD,CAAC,EAAvC,EAA0C;AAC1CD,QAAAA,GAAG,IAAIG,QAAQ,CAACX,YAAY,CAACS,CAAD,CAAZ,CAAgBG,KAAjB,CAAf;AACC;;AACD,YAAMC,QAAQ,GAAGL,GAAjB;AACA,YAAMM,YAAY,GAAGb,YAAY,GAAEY,QAAnC;AAEA,UAAIE,OAAJ;AACR,UAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBnB,MAAzB;AACAiB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,cAAhB,EAAiCJ,YAAjC;AACAE,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAA0BL,QAA1B;AACAG,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAwBf,KAAxB;AACAa,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA2BhB,QAA3B;AACAc,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAwBd,KAAxB;AACAY,MAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA0Bb,OAA1B;AACAW,MAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA0BZ,OAA1B;AACAU,MAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA6BX,UAA7B;AACAS,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuBxB,IAAvB;AACAsB,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BC,IAAI,CAACC,SAAL,CAAepB,YAAf,CAA5B;AACGe,MAAAA,OAAO,GAAG;AACTM,QAAAA,MAAM,EAAE,MADC;AAETC,QAAAA,GAAG,EAAG,qDAFG;AAGTC,QAAAA,OAAO,EAAE;AAAE,0BAAgB,kBAAlB;AAAsC,0BAAiB,GAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAAvF,SAHA;AAITC,QAAAA,IAAI,EAAEV;AAJG,OAAV;AAOHnC,MAAAA,KAAK,CAACkC,OAAD,CAAL,CAAeY,IAAf,CAAqBD,IAAD,IAAU;AAC5B,YAAIA,IAAI,CAACA,IAAL,CAAUE,YAAV,KAA2B,GAA/B,EAAoC;AAClChD,UAAAA,MAAM,CAACiD,OAAP,CAAeH,IAAI,CAACA,IAAL,CAAUI,YAAzB,EAAuC;AAAEC,YAAAA,eAAe,EAAE;AAAnB,WAAvC;AACE,SAFJ,MAEQ;AACNnD,UAAAA,MAAM,CAACoD,KAAP,CAAaN,IAAb,EAAmB;AAAEK,YAAAA,eAAe,EAAE;AAAnB,WAAnB;AACD;AACF,OAND;AAOH,KAlFkB;;AAEf,SAAK3C,cAAL,GAAsB,IAAIb,oBAAJ,EAAtB;AACA,SAAKuB,KAAL,GAAa;AACTmC,MAAAA,SAAS,EAAC,EADD;AAETC,MAAAA,UAAU,EAAE,KAFH;AAGTnC,MAAAA,MAAM,EAAC,EAHE;AAITC,MAAAA,YAAY,EAAC,EAJJ;AAKTC,MAAAA,YAAY,EAAC,EALJ;AAMTC,MAAAA,QAAQ,EAAC,EANA;AAQTR,MAAAA,IAAI,EAAC,EARI;AASTS,MAAAA,KAAK,EAAC,EATG;AAUTC,MAAAA,KAAK,EAAC,EAVG;AAWTC,MAAAA,OAAO,EAAC,EAXC;AAYTC,MAAAA,OAAO,EAAC,EAZC;AAaTC,MAAAA,UAAU,EAAC;AAbF,KAAb;AAeH;;AACD4B,EAAAA,iBAAiB,GAAG;AAChB,QAAIX,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AAC/B,YAAMW,WAAW,GAAG9D,QAAQ,CAACkD,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAA5B;AACA,YAAM1B,MAAM,GAAGqC,WAAW,CAACC,GAA3B;AACA,WAAK7C,QAAL,CAAc;AAACO,QAAAA,MAAM,EAACA,MAAR;AAAiBmC,QAAAA,UAAU,EAAC;AAA5B,OAAd;AACA,WAAKlD,KAAL,CAAWsD,QAAX,CAAoB9D,cAAc,CAACuB,MAAD,CAAlC;AACH;AACJ;;AACDwC,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACjC,SAAKhD,QAAL,CAAc;AACVyC,MAAAA,SAAS,EAAEO,SAAS,CAACC,QADX;AAEVvC,MAAAA,QAAQ,EAACsC,SAAS,CAACC,QAAV,CAAmBC,QAFlB;AAGV1C,MAAAA,YAAY,EAACwC,SAAS,CAACC,QAAV,CAAmBE,IAHtB;AAIV1C,MAAAA,YAAY,EAACuC,SAAS,CAACC,QAAV,CAAmBG;AAJtB,KAAd;AAMH;;AAiDDC,EAAAA,MAAM,GAAG;AAAA,yBAC2C,KAAK/C,KADhD;AAAA,UACEE,YADF,gBACEA,YADF;AAAA,UACekC,UADf,gBACeA,UADf;AAAA,UAC2BjC,YAD3B,gBAC2BA,YAD3B;;AAGL,QAAID,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,EAA9C,EAAiD;AAC7C,aACI;AAAK,QAAA,EAAE,EAAC,UAAR;AAAmB,QAAA,SAAS,EAAC,wBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACgB;AAAK,QAAA,GAAG,EAAC,yFAAT;AAAmG,QAAA,SAAS,EAAC,WAA7G;AAAyH,QAAA,IAAI,EAAC,aAA9H;AAA4I,QAAA,GAAG,EAAC,EAAhJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADhB,EACoK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADpK,EAEgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAFhB,CADA,CADJ;AAQH,KATD,MASK;AACD,UAAGA,YAAY,CAACU,MAAhB,EAAwB;AACpB,YAAIF,GAAG,GAAG,CAAV;;AACA,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAGT,YAAY,CAACU,MAA9B,EAAsCD,CAAC,EAAvC,EAA0C;AAC1CD,UAAAA,GAAG,IAAIG,QAAQ,CAACX,YAAY,CAACS,CAAD,CAAZ,CAAgBG,KAAjB,CAAf;AACC;;AACD,cAAMC,QAAQ,GAAGL,GAAjB;AACA,cAAMM,YAAY,GAAGb,YAAY,GAAEY,QAAnC;AACA,eACI;AAAK,UAAA,EAAE,EAAC,UAAR;AAAmB,UAAA,SAAS,EAAC,wBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGKqB,UAAU,GACVlC,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,EAA1C,GACG;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,GAAG,EAAC,yFAAT;AAAmG,UAAA,SAAS,EAAC,WAA7G;AAAyH,UAAA,IAAI,EAAC,aAA9H;AAA4I,UAAA,GAAG,EAAC,EAAhJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EACwJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADxJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAFJ,CADH,GAMG,0CACA;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAO,UAAA,SAAS,EAAC,+CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,SAAS,EAAC,uDAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EAEI;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAGI;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHJ,EAII;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,EAKI;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALJ,CADJ,CADJ,EAUQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACSA,YAAY,CAACU,MAAb,GAAoBV,YAAY,CAAC8C,GAAb,CAAkBC,IAAD,IAClC;AAAI,UAAA,GAAG,EAAEA,IAAI,CAACC,MAAd;AAAsB,UAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAI;AAAK,UAAA,SAAS,EAAC,iCAAf;AAAiD,UAAA,GAAG,EAAG,2CAA0CD,IAAI,CAACE,KAAM,EAA5G;AAA+G,UAAA,GAAG,EAAC,EAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAJ,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKF,IAAI,CAACG,YAAV,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKH,IAAI,CAACnC,KAAV,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKmC,IAAI,CAACI,IAAV,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALJ,CADiB,CAApB,GAQE,eATX,CAVR,CADJ,CADA,EA0BA;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACH;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACFlD,YAAY,KAAKY,QAAjB,IAA6BZ,YAAY,GAAGY,QAA5C,GAEH,0CACI;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACQ;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAAhC,OAAgE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIZ,YAAJ,CAAhE,CADR,EAEQ;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAhC,OAAqD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIY,QAAJ,CAArD,CAFR,EAGQ;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAhC,OAAuD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIZ,YAAJ,YAAwBY,QAAxB,YAAwCC,YAAxC,QAAvD,CAHR,CADJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAiBD,QAAjB,QANJ,OAFG,GAQyC,EATvC,CADG,EAYH;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,MAA9B;AAAqC,UAAA,WAAW,EAAC,EAAjD;AAAoD,UAAA,KAAK,EAAE,KAAKf,KAAL,CAAWJ,IAAtE;AAA4E,UAAA,QAAQ,EAAER,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CADiB,EAKjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,OAA9B;AAAsC,UAAA,WAAW,EAAC,EAAlD;AAAqD,UAAA,KAAK,EAAE,KAAKY,KAAL,CAAWK,KAAvE;AAA8E,UAAA,QAAQ,EAAEjB,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CALiB,EASjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,OAA9B;AAAsC,UAAA,WAAW,EAAC,EAAlD;AAAqD,UAAA,KAAK,EAAE,KAAKY,KAAL,CAAWM,KAAvE;AAA8E,UAAA,QAAQ,EAAElB,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CATiB,EAajB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,SAA9B;AAAwC,UAAA,WAAW,EAAC,EAApD;AAAuD,UAAA,KAAK,EAAE,KAAKY,KAAL,CAAWO,OAAzE;AAAkF,UAAA,QAAQ,EAAEnB,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAbiB,EAiBjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,SAA9B;AAAwC,UAAA,WAAW,EAAC,EAApD;AAAuD,UAAA,KAAK,EAAE,KAAKY,KAAL,CAAWQ,OAAzE;AAAkF,UAAA,QAAQ,EAAEpB,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAjBiB,EAqBjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,EAEI,oBAAC,WAAD;AAAa,UAAA,IAAI,EAAC,MAAlB;AAAyB,UAAA,IAAI,EAAC,YAA9B;AAA2C,UAAA,WAAW,EAAC,EAAvD;AAA0D,UAAA,KAAK,EAAE,KAAKY,KAAL,CAAWS,UAA5E;AAAwF,UAAA,QAAQ,EAAErB,CAAC,IAAI,KAAKD,iBAAL,CAAuBC,CAAvB,CAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CArBiB,EA0BjB;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,IAAI,EAAC,YAA1B;AAAuC,UAAA,EAAE,EAAC,iBAA1C;AAA4D,UAAA,OAAO,EAAGA,CAAD,IAAK,KAAKW,UAAL,CAAgBX,CAAhB,CAA1E;AAA8F,UAAA,KAAK,EAAC,aAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA1BiB,CAZG,CA1BA,CAPO,GA4EV;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADH,CA/EL,CADJ;AA0FH;AACJ;AAEJ;;AArM4B;;AAuMjC,MAAMkE,eAAe,GAAItD,KAAD,KAAY;AAChC2C,EAAAA,QAAQ,EAAE3C,KAAK,CAACuD,WAAN,CAAkB3B;AADI,CAAZ,CAAxB;;AAGA,eAAerD,OAAO,CAAC+E,eAAD,CAAP,CAAyBtE,QAAzB,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport parseJwt from './../store/helpers/common';\nimport SimpleReactValidator from 'simple-react-validator';\nimport { getUserdetails} from \"./../store/actions/userActions\";\nimport { FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport toastr from \"reactjs-toastr\";\nimport axios from 'axios';\n\nclass checkout extends Component {\n    constructor(props) {\n        super(props);\n        this.loginValidator = new SimpleReactValidator();\n        this.state = {\n            usersdata:'',\n            isLoggedIn: false,\n            currid:'',\n            currusercart:'',\n            curruser_vxp:'',\n            username:'',\n\n            name:'',\n            email:'',\n            phone:'',\n            address:'',\n            pincode:'',\n            ordernotes:''\n        };\n    }\n    componentDidMount() {\n        if (localStorage.getItem('token')) {\n            const currdetails = parseJwt(localStorage.getItem('token'));\n            const currid = currdetails.sub;\n            this.setState({currid:currid , isLoggedIn:true});\n            this.props.dispatch(getUserdetails(currid));\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            usersdata :nextProps.userdata,\n            username:nextProps.userdata.nickname,\n            currusercart:nextProps.userdata.cart,\n            curruser_vxp:nextProps.userdata.vxp\n        });\n    }\n    validateLoginForm = (e) => {\n        let validate = this.loginValidator;\n        if (validate.allValid()) {\n\n        } else {\n            validate.showMessages();\n            this.forceUpdate();\n        }\n        this.setState({ [e.target.name]: e.target.value });\n        e.preventDefault();\n    }\n    placeOrder = () =>{\n        const {currid ,currusercart,curruser_vxp, username, name,email,phone,address,pincode,ordernotes} = this.state;\n        var sum = 0;\n                for(var i=0; i < currusercart.length; i++){\n                sum += parseInt(currusercart[i].price);\n                }\n                const totalsum = sum;\n                const remainingbal = curruser_vxp -totalsum;        \n                \n                let request;\n        let formData = new FormData();\n        formData.append('currid',currid );\n        formData.append('remainingbal' , remainingbal);\n        formData.append('price' , totalsum);\n        formData.append('email',email );\n        formData.append('username',username );\n        formData.append('phone',phone );\n        formData.append('address',address );\n        formData.append('pincode',pincode );\n        formData.append('ordernotes',ordernotes );\n        formData.append('name',name );\n        formData.append('cartdata', JSON.stringify(currusercart));\n           request = {\n            method: 'POST',\n            url: `https://xrsports.gg/team/public/user/checkout-order`,\n            headers: { 'Content-Type': 'application/json', 'X-Auth-Token': `${localStorage.getItem('token')}` },\n            data: formData\n          };\n        \n        axios(request).then((data) => {\n          if (data.data.ResponseCode === \"1\") {\n            toastr.success(data.data.ResponseText, { displayDuration: 1500 })\n             }else{\n            toastr.error(data, { displayDuration: 1500 })\n          }\n        });\n    }\n    render() {\n        const {currusercart,isLoggedIn ,curruser_vxp} = this.state;\n       \n        if( currusercart === null || currusercart === ''){\n            return (\n                <div id=\"mainpage\" className=\"main_box col-md-12 p-0\">\n                <div className=\"row\">\n                                <img src=\"https://res.cloudinary.com/dnv0dij0y/image/upload/v1575621923/New_Project_57_ipahtu.png\" className=\"emptycart\" name=\" empty cart\" alt=\"\"/><br/>\n                                <h3>OOPS..!! Your cart is empty..</h3>\n                            </div>\n               </div>\n            );\n        }else{\n            if(currusercart.length ){\n                var sum = 0;\n                for(var i=0; i < currusercart.length; i++){\n                sum += parseInt(currusercart[i].price);\n                }\n                const totalsum = sum;\n                const remainingbal = curruser_vxp -totalsum;\n                return (\n                    <div id=\"mainpage\" className=\"main_box col-md-12 p-0\">\n                     \n                     {\n                         isLoggedIn ?\n                         currusercart === null || currusercart === ''?\n                            <div className=\"row\">\n                                <img src=\"https://res.cloudinary.com/dnv0dij0y/image/upload/v1575621923/New_Project_57_ipahtu.png\" className=\"emptycart\" name=\" empty cart\" alt=\"\"/><br/>\n                                <h3>OOPS..!! Your cart is empty..</h3>\n                            </div>\n                            :\n                            <>\n                            <div className=\"row\">\n                                <table className=\"table ranking mt-2 leaderbrd leaderboard mt-2\">\n                                    <thead>\n                                        <tr className=\"new_list_tournament only_headings list_game leadehead\">\n                                            <th className=\"border-top-0\">Product Image</th>\n                                            <th className=\"border-top-0\">Title</th>\n                                            <th className=\"border-top-0\">Price</th>\n                                            <th className=\"border-top-0\">Size</th>\n                                            <th className=\"border-top-0\">Quantity</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                                {currusercart.length?currusercart.map((post) => (\n                                                    <tr key={post.unique} className=\"table-secondary\">\n                                                        <td><img className=\"rounded-circle cartproductimage\" src={`https://xrsports.gg/team/public/rewards/${post.image}`} alt=\"\"/></td>\n                                                        <td>{post.product_name}</td>\n                                                        <td>{post.price}</td>\n                                                        <td>{post.size}</td>\n                                                        <td>1</td>\n                                                    </tr>\n                                                )):'Cart is empty'}\n                                               \n                                        </tbody>\n                                </table>\n                            </div> \n                            <div className=\"row\">\n                         <div className=\"leftside\">\n                      {curruser_vxp === totalsum || curruser_vxp > totalsum?\n                    \n                    <>\n                        <div className=\"cartcal\">\n                                <div className=\"floatleft-text\"><h5>Redeemable XP Balance:</h5> <p>{curruser_vxp}</p></div>\n                                <div className=\"floatleft-text\"><h5>Oder Total:</h5> <p>{totalsum}</p></div>\n                                <div className=\"floatleft-text\"><h5>Remaining XP:</h5> <p>{curruser_vxp} XP - {totalsum} XP = {remainingbal} XP</p></div>\n                        </div>\n                        <h2>Cart Total: {totalsum} XP</h2>  </>:''}\n                        </div> \n                         <div className=\"checkoutform\">\n        <FormGroup>\n            <FormLabel>Name:</FormLabel>\n            <FormControl type=\"text\" name=\"name\" placeholder=\"\" value={this.state.name} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        <FormGroup>\n            <FormLabel>Email:</FormLabel>\n            <FormControl type=\"text\" name=\"email\" placeholder=\"\" value={this.state.email} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        <FormGroup>\n            <FormLabel>Phone:</FormLabel>\n            <FormControl type=\"text\" name=\"phone\" placeholder=\"\" value={this.state.phone} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        <FormGroup>\n            <FormLabel>Delivery Address:</FormLabel>\n            <FormControl type=\"text\" name=\"address\" placeholder=\"\" value={this.state.address} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        <FormGroup>\n            <FormLabel>Pincode:</FormLabel>\n            <FormControl type=\"text\" name=\"pincode\" placeholder=\"\" value={this.state.pincode} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        <FormGroup>\n            <FormLabel>Order Notes:</FormLabel>\n            <FormControl type=\"text\" name=\"ordernotes\" placeholder=\"\" value={this.state.ordernotes} onChange={e => this.validateLoginForm(e)} />\n        </FormGroup>\n        \n        <input type=\"submit\" name=\"placeorder\" id=\"placeorderfinal\" onClick={(e)=>this.placeOrder(e)} value=\"Place Order\"/>\n                         </div>\n                     </div>\n                            </>\n                          :\n                         <div className=\"row\">\n                            <h3>please Login</h3>\n                        </div>\n                    \n                     }\n                     \n                    \n                    </div>\n                    \n                            );\n            }\n        }\n      \n    }\n}\nconst mapStateToProps = (state) => ({\n    userdata: state.userDetails.data\n})\nexport default connect(mapStateToProps)(checkout);"]},"metadata":{},"sourceType":"module"}